# HardQode Test Task (docker-container)
Docker-контейнер для развертывания тестового проекта

##### Технологии
- Python 3.10
- Django 4.2
- Django REST Framework 3.14
- Gunicorn 21.2
- Nginx 1.24                                                                     
- Docker

##### Как запустить проект:

Клонировать репозиторий и перейти в директорию `infra` в командной строке:

```
git clone git@github.com:grmzk/hardqode.git
```

```
cd hardqode/infra/
```

Собрать контейнер и запустить:

```
docker-compose up --build -d
```

Выполнить (только после первой сборки):

```
docker-compose exec backend python manage.py migrate
```

Сервер запускается по адресу 127.0.0.1:8000

##### Эндпоинты

[Полная документация](http://127.0.0.1:8000/api/docs/)

### Реализация задач

##### **Построение архитектуры(6 баллов)**

1. Создать сущность продукта. У продукта должен быть создатель этого продукта(автор/преподаватель). Название продукта, дата и время старта, стоимость **(1 балл)**
    ```
    Класс Course из backend/courses/models.py
    ```
2. Определить, каким образом мы будем понимать, что у пользователя(клиент/студент) есть доступ к продукту. **(2 балл)**
    ```
    Метод is_course_student класса Student из backend/users/models.py
    ```
3. Создать сущность урока. Урок может принадлежать только одному продукту. В уроке должна быть базовая информация: название, ссылка на видео. **(1 балл)**
   ```
   Класс Lesson из backend/courses/models.py
   ```
4. Создать сущность группы. По каждому продукту есть несколько групп пользователей, которые занимаются в этом продукте. Минимальное и максимальное количество юзеров в группе задается внутри продукта. Группа содержит следующую информацию: ученики, которые состоят в группе, название группы, принадлежность группы к продукту **(2 балла)**
   ```
   Класс Group из backend/courses/models.py
   ```

##### **Написание запросов и реализация логики распределения(11 баллов)**

1. При получении доступа к продукту, распределять пользователя в группу. Если продукт ещё не начался, то можно пересобрать группы так, чтобы везде было примерно одинаковое количество участников.
    
    По-умолчанию алгоритм распределения должен работать заполняя до максимального значения **(5 баллов)**.
    
    **+3 балла** дается за реализацию алгоритма распределения по группам так, чтобы в каждой группе количество участников не отличалось больше, чем на 1. При этом, минимальные и максимальные значения участников в группе должны быть учтены.
   ```
   Алгоритм реализован в методе add_student класса Course из backend/users/models.py
   Эндпоинты:
      /api/students/{id}/add_to_course/{course_id}/
      /api/courses/{id}/rebalance_groups/
   ```
2. Реализовать API на список продуктов, доступных для покупки, которое бы включало в себя основную информацию о продукте и количество уроков, которые принадлежат продукту. **(2 балла)**
   ```
   Эндпоинт /api/courses/
   ```
3. Реализовать API с выведением списка уроков по конкретному продукту к которому пользователь имеет доступ. **(1 балл)**.
   ```
   Эндпоинт /api/students/{id}/get_course_lessons/{course_id}/
   ```

### Автор
- Игорь Музыка [mailto:muzyka-iv@yandex.ru]
